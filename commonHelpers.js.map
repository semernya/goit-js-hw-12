{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nexport function renderMarcup(data) {\n  return data.hits\n    .map(\n      el =>\n        `<div class=\"gallery-item\">\n            <a class=\"gallery-link\" href=\"${el.largeImageURL}\">\n                <img class=\"gallery-image\" src=\"${el.webformatURL}\" alt=\"${el.tags}\" />\n            </a>\n            <div class=\"gallery-item-info\">\n                <p class=\"gallery-item-info-par\">\n                    <span class=\"gallery-item-info-span\">Likes: <span>${el.likes}</span>\n                    </span>    \n                </p>\n                <p class=\"gallery-item-info-par\">\n                    <span class=\"gallery-item-info-span\">Views: <span>${el.views}</span>\n                    </span>    \n                </p>\n                <p class=\"gallery-item-info-par\">\n                    <span class=\"gallery-item-info-span\">Comments: <span>${el.comments}</span>\n                    </span>    \n                </p>\n                <p class=\"gallery-item-info-par\">\n                    <span class=\"gallery-item-info-span\">Downloads: <span>${el.downloads}</span>\n                    </span>    \n                </p>\n            </div>\n        </div>`\n    )\n    .join('');\n}\n\nexport function showEndOfListMessage() {\n  iziToast.info({\n    timeout: 3000,\n    position: 'topRight',\n    message: \"We're sorry, but you've reached the end of search results.\",\n  });\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport axios from 'axios';\n\nconst KEY = '41952140-5e618661129c37e138516e154';\nconst URL = 'https://pixabay.com/api/';\nconst loader = document.querySelector('.loader');\n\nexport async function fetchImages(searchWord, currPage) {\n  loader.style.display = 'block';\n  try {\n    const resp = await axios.get(URL, {\n      params: {\n        key: KEY,\n        q: searchWord,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page: currPage,\n        per_page: 15,\n      },\n    });\n    loader.style.display = 'none';\n\n    if (resp.data.hits.length === 0) {\n      iziToast.error({\n        timeout: 3000,\n        position: 'topRight',\n        message:\n          'There are no images matching your search query. Please, enter something else!',\n      });\n    }\n    return resp.data;\n  } catch (error) {\n    console.error('Error fetching data!', error);\n  }\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { renderMarcup, showEndOfListMessage } from './js/render-functions';\nimport { fetchImages } from './js/pixabay-api';\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  nav: true,\n  captions: true,\n  captionsData: 'alt',\n  captionDelay: 150,\n});\n\nconst form = document.querySelector('.search-form');\nconst container = document.querySelector('.gallery');\nconst loadMoreBtn = document.querySelector('.load-btn');\nlet searchWord = '';\nlet currPage;\n\nform.addEventListener('submit', onSubmit);\nloadMoreBtn.addEventListener('click', onLoadMore);\n\nasync function onSubmit(event) {\n  currPage = 1;\n  event.preventDefault();\n  container.innerHTML = '';\n  searchWord = form.elements.searchWord.value.trim();\n\n  try {\n    const images = await fetchImages(searchWord, currPage).then(data => {\n      const marcup = renderMarcup(data);\n      container.insertAdjacentHTML('beforeend', marcup);\n      lightbox.refresh();\n    });\n  } catch (error) {\n    console.error('Error:', error);\n  }\n  form.reset();\n  loadMoreBtn.style.display = 'block';\n}\n\nasync function onLoadMore() {\ncurrPage += 1;\n  try {\n    const images = await fetchImages(searchWord, currPage).then(data => {\n      const marcup = renderMarcup(data);\n      container.insertAdjacentHTML('beforeend', marcup);\n      lightbox.refresh();\n    });\n\n    const cardHeight = container.getBoundingClientRect().height;\n    window.scrollBy({\n      top: 4 * cardHeight,\n      behavior: 'smooth',\n    });\n\n    if (!images.hits || images.hits.length === 0) {\n      loadMoreBtn.style.display = 'none';\n      showEndOfListMessage();\n    }\n  } catch (error) {\n    console.error('Error:', error);\n  }\n}\n"],"names":["renderMarcup","data","el","showEndOfListMessage","iziToast","KEY","URL","loader","fetchImages","searchWord","currPage","resp","axios","error","lightbox","SimpleLightbox","form","container","loadMoreBtn","onSubmit","onLoadMore","event","images","marcup","cardHeight"],"mappings":"owBAGO,SAASA,EAAaC,EAAM,CACjC,OAAOA,EAAK,KACT,IACCC,GACE;AAAA,4CACoCA,EAAG;AAAA,kDACGA,EAAG,sBAAsBA,EAAG;AAAA;AAAA;AAAA;AAAA,wEAINA,EAAG;AAAA;AAAA;AAAA;AAAA,wEAIHA,EAAG;AAAA;AAAA;AAAA;AAAA,2EAIAA,EAAG;AAAA;AAAA;AAAA;AAAA,4EAIFA,EAAG;AAAA;AAAA;AAAA;AAAA,eAK1E,EACA,KAAK,EAAE,CACZ,CAEO,SAASC,GAAuB,CACrCC,EAAS,KAAK,CACZ,QAAS,IACT,SAAU,WACV,QAAS,4DACb,CAAG,CACH,CCpCA,MAAMC,EAAM,qCACNC,EAAM,2BACNC,EAAS,SAAS,cAAc,SAAS,EAExC,eAAeC,EAAYC,EAAYC,EAAU,CACtDH,EAAO,MAAM,QAAU,QACvB,GAAI,CACF,MAAMI,EAAO,MAAMC,EAAM,IAAIN,EAAK,CAChC,OAAQ,CACN,IAAKD,EACL,EAAGI,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAMC,EACN,SAAU,EACX,CACP,CAAK,EACD,OAAAH,EAAO,MAAM,QAAU,OAEnBI,EAAK,KAAK,KAAK,SAAW,GAC5BP,EAAS,MAAM,CACb,QAAS,IACT,SAAU,WACV,QACE,+EACV,CAAO,EAEIO,EAAK,IACb,OAAQE,EAAP,CACA,QAAQ,MAAM,uBAAwBA,CAAK,CAC5C,CACH,CC9BA,MAAMC,EAAW,IAAIC,EAAe,aAAc,CAChD,IAAK,GACL,SAAU,GACV,aAAc,MACd,aAAc,GAChB,CAAC,EAEKC,EAAO,SAAS,cAAc,cAAc,EAC5CC,EAAY,SAAS,cAAc,UAAU,EAC7CC,EAAc,SAAS,cAAc,WAAW,EACtD,IAAIT,EAAa,GACbC,EAEJM,EAAK,iBAAiB,SAAUG,CAAQ,EACxCD,EAAY,iBAAiB,QAASE,CAAU,EAEhD,eAAeD,EAASE,EAAO,CAC7BX,EAAW,EACXW,EAAM,eAAc,EACpBJ,EAAU,UAAY,GACtBR,EAAaO,EAAK,SAAS,WAAW,MAAM,KAAI,EAEhD,GAAI,CACF,MAAMM,EAAS,MAAMd,EAAYC,EAAYC,CAAQ,EAAE,KAAKT,GAAQ,CAClE,MAAMsB,EAASvB,EAAaC,CAAI,EAChCgB,EAAU,mBAAmB,YAAaM,CAAM,EAChDT,EAAS,QAAO,CACtB,CAAK,CACF,OAAQD,EAAP,CACA,QAAQ,MAAM,SAAUA,CAAK,CAC9B,CACDG,EAAK,MAAK,EACVE,EAAY,MAAM,QAAU,OAC9B,CAEA,eAAeE,GAAa,CAC5BV,GAAY,EACV,GAAI,CACF,MAAMY,EAAS,MAAMd,EAAYC,EAAYC,CAAQ,EAAE,KAAKT,GAAQ,CAClE,MAAMsB,EAASvB,EAAaC,CAAI,EAChCgB,EAAU,mBAAmB,YAAaM,CAAM,EAChDT,EAAS,QAAO,CACtB,CAAK,EAEKU,EAAaP,EAAU,sBAAqB,EAAG,OACrD,OAAO,SAAS,CACd,IAAK,EAAIO,EACT,SAAU,QAChB,CAAK,GAEG,CAACF,EAAO,MAAQA,EAAO,KAAK,SAAW,KACzCJ,EAAY,MAAM,QAAU,OAC5Bf,IAEH,OAAQU,EAAP,CACA,QAAQ,MAAM,SAAUA,CAAK,CAC9B,CACH"}